5.4. Политкорректная система. Производитель (producer) отправляет 32 бита информации потребителю (consumer) последовательными блоками по 8 бит. Потребитель получает блоки и собирает их в одно 32-битное слово. См. диаграмму. (cм. task 5_4(block diag).PNG)

Передача управляется сигналами p.put и c.Free; данные передаются по линии p.payload. В названиях отражены стороны, формирующие сигналы (так, p.put означает, что производитель формирует сигнал, сообщающий потребителю о наличии данных на линии). В описании на SystemVerilog такие имена  невозможны - почему?). Производитель и потребитель описываются разными конечными автоматами.

На показанной выше временной диаграмме видно, как данные передаются от производителя потребителю. Передача осуществляется синхронно. Когда потребитель готов к приему информации, он устанавливает сигнал с. Free. Производитель, увидев c.Free, помещает байт рау.а на линию p.payload и одновременно устанавливает сигнал р.put. Увидев р.put, потребитель делает две вещи: сбрасывает с. Free (теперь он не свободен, а занят приемом данных) и последовательно загружает данные с линии p.payload в переменные рау.а, рау.b, рау.с и рау.d по фронтам тактового сигнала (как показано выше). На следующем такте после установки рау. d производитель сбрасывает р.put. Потребитель видит, что р.put сброшен, и устанавливает с.Frее. Вход valueToSend и выход valueReceived представлены в следующем упакованном формате. Как видно на диаграмме, в каждый момент времени посылается только один элемент структуры.

typedef struct packed {
bit [7:0] a;
bit [7:0] b;
bit [7:0] c;
bit [7:0] d;} pay;

Спроектируйте потоки производителя и потребителя. В обоих потоках должны быть регистры для хранения сигналов и принимаемых данных. Определите входы, выходы и точки управления этих регистров. Отобразите их в диаграммах состояний конечных автоматов и в схемах трактов данных (регистров немного). 

9.4. Для задачи 5.4 напишите следующие утверждения:
А) с.Frее - первый сигнал, устанавливаемый после сброса (по сравнению с р.put). 
В) Установка с.Free и р.put осуществляется в правильном порядке.